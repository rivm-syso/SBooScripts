7.3 Physical inter media transport processes
================
Jaap Slootweg, Joris Quik
2023-12-13

*Notice* the convention of filenames and the function names. The
convention of filenames is given in the AAAreadme.R file in the sboo
project. (I think it will be on the top of your list when your sort the
filenames alphabetically) All filenames and function names are
identical, with two exceptions: 1. fGeneral.R contains some very general
functions. 2. defining functions of SBOO variables do not contain the
preposition v\_ which makes them easier to read and still distinguish
from flows or regular functions.

## Other intermedia transfer processes

Intermedia processes discussed here are:

- Erosion

- Run-off

- Sedimentation

- Resuspension

The diffusion based processes (DiffusionProcesses.Rmd) and deposition
are descibed elsewhere (Deposition.Rmd).

### Erosion

These processes are combined in the excel versions, like k = (RAINrate
\* FRACrun/Ks1w + EROSION) \* CORRrunoff / DEPTH

In the R version, if multiple processes are defined for the same
transfer, the k’s are automatically added. This makes it easier to
define and possibly re-define each process. In this case the factor
CORRrunoff / DEPTH will be executed twice. We believe the loss in
calculation speed is negligible. And this approach is in favor of
clearly defined process functions.

The factor CORRrunoff (Correction factor depth dependent soil
concentration) however is calculated as EXP((-1/0.1) \* 0) \* (1/0.1) \*
DEPTH / (1-EXP((-1/0.1) \* DEPTH)) for the assumed pentration depth of
0.1 m \[REF\]. To make sure this remains the same for both Runoff and
erosion, we define a variable to calculate it. The only parameter, so
far, is DEPTH, which has been renamed to vertDistance in the R version
(combined with height). We will define the two processes separate, first
the erosion process, with a variable and a process defining function.

``` r
#Regular init for testing
source("baseScripts/initTestWorld.R")
source(paste(getwd(),"testScripts/initPartitioningVariables.R", sep="/"))
```

There is an anomaly in the routes that Erosion takes place. The current
implementation in SBoo and in SBexcel is that there is only 1 receiving
water compartment (water at Continental Regional and sea at global
scales). Where in fact there is at Cont. and Regional scales also lake
water and sea water, which might not need to be neglected. \*this is an
issue to potentially fix still in SB4 scope. Same holds for Runoff.

``` r
# data needed for k_Erosion:
World$fetchData("relevant_depth_s")
```

    ## [1] 0

``` r
World$fetchData("penetration_depth_s")
```

    ## [1] 0.1

``` r
World$fetchData("EROSIONsoil")
```

    ##          SubCompart EROSIONsoil
    ## 1  agriculturalsoil    9.51e-13
    ## 9       naturalsoil    9.51e-13
    ## 10        othersoil    9.51e-13

``` r
World$fetchData("VertDistance")
```

    ##          Scale         SubCompart VertDistance
    ## 1       Arctic                air        1e+03
    ## 2       Arctic         cloudwater        1e+03
    ## 3       Arctic          deepocean        3e+03
    ## 5       Arctic     marinesediment        3e-02
    ## 6       Arctic        naturalsoil        5e-02
    ## 8       Arctic                sea        1e+02
    ## 9  Continental   agriculturalsoil        2e-01
    ## 10 Continental                air        1e+03
    ## 11 Continental         cloudwater        1e+03
    ## 13 Continental freshwatersediment        3e-02
    ## 14 Continental               lake        1e+02
    ## 15 Continental       lakesediment        3e-02
    ## 16 Continental     marinesediment        3e-02
    ## 17 Continental        naturalsoil        5e-02
    ## 18 Continental          othersoil        5e-02
    ## 19 Continental              river        3e+00
    ## 20 Continental                sea        2e+02
    ## 21    Moderate                air        1e+03
    ## 22    Moderate         cloudwater        1e+03
    ## 23    Moderate          deepocean        3e+03
    ## 25    Moderate     marinesediment        3e-02
    ## 26    Moderate        naturalsoil        5e-02
    ## 28    Moderate                sea        1e+02
    ## 29    Regional   agriculturalsoil        2e-01
    ## 30    Regional                air        1e+03
    ## 31    Regional         cloudwater        1e+03
    ## 33    Regional freshwatersediment        3e-02
    ## 34    Regional               lake        1e+02
    ## 35    Regional       lakesediment        3e-02
    ## 36    Regional     marinesediment        3e-02
    ## 37    Regional        naturalsoil        5e-02
    ## 38    Regional          othersoil        5e-02
    ## 39    Regional              river        3e+00
    ## 40    Regional                sea        1e+01
    ## 41      Tropic                air        1e+03
    ## 42      Tropic         cloudwater        1e+03
    ## 43      Tropic          deepocean        3e+03
    ## 45      Tropic     marinesediment        3e-02
    ## 46      Tropic        naturalsoil        5e-02
    ## 48      Tropic                sea        1e+02

``` r
World$fetchData("ScaleName")
```

    ##         Scale   ScaleName
    ## 1      Arctic      Arctic
    ## 2 Continental Continental
    ## 3    Moderate    Moderate
    ## 4    Regional    Regional
    ## 5      Tropic      Tropic

``` r
# test1 <- World$NewProcess("k_Runoff")
# test1$UpdateKaas("k_Runoff")
# World$fetchData("Kscompw")

World$FromDataAndTo("k_Erosion")
```

    ##       process   fromSubCompart toSubCompart   fromScale     toScale fromSpecies
    ## 41  k_Erosion agriculturalsoil        river      Arctic      Arctic       Large
    ## 42  k_Erosion      naturalsoil        river      Arctic      Arctic       Large
    ## 43  k_Erosion        othersoil        river      Arctic      Arctic       Large
    ## 44  k_Erosion        othersoil          sea      Arctic      Arctic       Large
    ## 45  k_Erosion agriculturalsoil        river Continental Continental       Large
    ## 46  k_Erosion      naturalsoil        river Continental Continental       Large
    ## 47  k_Erosion        othersoil        river Continental Continental       Large
    ## 48  k_Erosion        othersoil          sea Continental Continental       Large
    ## 49  k_Erosion agriculturalsoil        river    Moderate    Moderate       Large
    ## 50  k_Erosion      naturalsoil        river    Moderate    Moderate       Large
    ## 51  k_Erosion        othersoil        river    Moderate    Moderate       Large
    ## 52  k_Erosion        othersoil          sea    Moderate    Moderate       Large
    ## 53  k_Erosion agriculturalsoil        river    Regional    Regional       Large
    ## 54  k_Erosion      naturalsoil        river    Regional    Regional       Large
    ## 55  k_Erosion        othersoil        river    Regional    Regional       Large
    ## 56  k_Erosion        othersoil          sea    Regional    Regional       Large
    ## 57  k_Erosion agriculturalsoil        river      Tropic      Tropic       Large
    ## 58  k_Erosion      naturalsoil        river      Tropic      Tropic       Large
    ## 59  k_Erosion        othersoil        river      Tropic      Tropic       Large
    ## 60  k_Erosion        othersoil          sea      Tropic      Tropic       Large
    ## 61  k_Erosion agriculturalsoil        river      Arctic      Arctic       Small
    ## 62  k_Erosion      naturalsoil        river      Arctic      Arctic       Small
    ## 63  k_Erosion        othersoil        river      Arctic      Arctic       Small
    ## 64  k_Erosion        othersoil          sea      Arctic      Arctic       Small
    ## 65  k_Erosion agriculturalsoil        river Continental Continental       Small
    ## 66  k_Erosion      naturalsoil        river Continental Continental       Small
    ## 67  k_Erosion        othersoil        river Continental Continental       Small
    ## 68  k_Erosion        othersoil          sea Continental Continental       Small
    ## 69  k_Erosion agriculturalsoil        river    Moderate    Moderate       Small
    ## 70  k_Erosion      naturalsoil        river    Moderate    Moderate       Small
    ## 71  k_Erosion        othersoil        river    Moderate    Moderate       Small
    ## 72  k_Erosion        othersoil          sea    Moderate    Moderate       Small
    ## 73  k_Erosion agriculturalsoil        river    Regional    Regional       Small
    ## 74  k_Erosion      naturalsoil        river    Regional    Regional       Small
    ## 75  k_Erosion        othersoil        river    Regional    Regional       Small
    ## 76  k_Erosion        othersoil          sea    Regional    Regional       Small
    ## 77  k_Erosion agriculturalsoil        river      Tropic      Tropic       Small
    ## 78  k_Erosion      naturalsoil        river      Tropic      Tropic       Small
    ## 79  k_Erosion        othersoil        river      Tropic      Tropic       Small
    ## 80  k_Erosion        othersoil          sea      Tropic      Tropic       Small
    ## 81  k_Erosion agriculturalsoil        river      Arctic      Arctic       Solid
    ## 82  k_Erosion      naturalsoil        river      Arctic      Arctic       Solid
    ## 83  k_Erosion        othersoil        river      Arctic      Arctic       Solid
    ## 84  k_Erosion        othersoil          sea      Arctic      Arctic       Solid
    ## 85  k_Erosion agriculturalsoil        river Continental Continental       Solid
    ## 86  k_Erosion      naturalsoil        river Continental Continental       Solid
    ## 87  k_Erosion        othersoil        river Continental Continental       Solid
    ## 88  k_Erosion        othersoil          sea Continental Continental       Solid
    ## 89  k_Erosion agriculturalsoil        river    Moderate    Moderate       Solid
    ## 90  k_Erosion      naturalsoil        river    Moderate    Moderate       Solid
    ## 91  k_Erosion        othersoil        river    Moderate    Moderate       Solid
    ## 92  k_Erosion        othersoil          sea    Moderate    Moderate       Solid
    ## 93  k_Erosion agriculturalsoil        river    Regional    Regional       Solid
    ## 94  k_Erosion      naturalsoil        river    Regional    Regional       Solid
    ## 95  k_Erosion        othersoil        river    Regional    Regional       Solid
    ## 96  k_Erosion        othersoil          sea    Regional    Regional       Solid
    ## 97  k_Erosion agriculturalsoil        river      Tropic      Tropic       Solid
    ## 98  k_Erosion      naturalsoil        river      Tropic      Tropic       Solid
    ## 99  k_Erosion        othersoil        river      Tropic      Tropic       Solid
    ## 100 k_Erosion        othersoil          sea      Tropic      Tropic       Solid
    ## 101 k_Erosion agriculturalsoil        river      Arctic      Arctic     Unbound
    ## 102 k_Erosion      naturalsoil        river      Arctic      Arctic     Unbound
    ## 103 k_Erosion        othersoil        river      Arctic      Arctic     Unbound
    ## 104 k_Erosion        othersoil          sea      Arctic      Arctic     Unbound
    ## 105 k_Erosion agriculturalsoil        river Continental Continental     Unbound
    ## 106 k_Erosion      naturalsoil        river Continental Continental     Unbound
    ## 107 k_Erosion        othersoil        river Continental Continental     Unbound
    ## 108 k_Erosion        othersoil          sea Continental Continental     Unbound
    ## 109 k_Erosion agriculturalsoil        river    Moderate    Moderate     Unbound
    ## 110 k_Erosion      naturalsoil        river    Moderate    Moderate     Unbound
    ## 111 k_Erosion        othersoil        river    Moderate    Moderate     Unbound
    ## 112 k_Erosion        othersoil          sea    Moderate    Moderate     Unbound
    ## 113 k_Erosion agriculturalsoil        river    Regional    Regional     Unbound
    ## 114 k_Erosion      naturalsoil        river    Regional    Regional     Unbound
    ## 115 k_Erosion        othersoil        river    Regional    Regional     Unbound
    ## 116 k_Erosion        othersoil          sea    Regional    Regional     Unbound
    ## 117 k_Erosion agriculturalsoil        river      Tropic      Tropic     Unbound
    ## 118 k_Erosion      naturalsoil        river      Tropic      Tropic     Unbound
    ## 119 k_Erosion        othersoil        river      Tropic      Tropic     Unbound
    ## 120 k_Erosion        othersoil          sea      Tropic      Tropic     Unbound
    ##     toSpecies
    ## 41      Large
    ## 42      Large
    ## 43      Large
    ## 44      Large
    ## 45      Large
    ## 46      Large
    ## 47      Large
    ## 48      Large
    ## 49      Large
    ## 50      Large
    ## 51      Large
    ## 52      Large
    ## 53      Large
    ## 54      Large
    ## 55      Large
    ## 56      Large
    ## 57      Large
    ## 58      Large
    ## 59      Large
    ## 60      Large
    ## 61      Small
    ## 62      Small
    ## 63      Small
    ## 64      Small
    ## 65      Small
    ## 66      Small
    ## 67      Small
    ## 68      Small
    ## 69      Small
    ## 70      Small
    ## 71      Small
    ## 72      Small
    ## 73      Small
    ## 74      Small
    ## 75      Small
    ## 76      Small
    ## 77      Small
    ## 78      Small
    ## 79      Small
    ## 80      Small
    ## 81      Solid
    ## 82      Solid
    ## 83      Solid
    ## 84      Solid
    ## 85      Solid
    ## 86      Solid
    ## 87      Solid
    ## 88      Solid
    ## 89      Solid
    ## 90      Solid
    ## 91      Solid
    ## 92      Solid
    ## 93      Solid
    ## 94      Solid
    ## 95      Solid
    ## 96      Solid
    ## 97      Solid
    ## 98      Solid
    ## 99      Solid
    ## 100     Solid
    ## 101   Unbound
    ## 102   Unbound
    ## 103   Unbound
    ## 104   Unbound
    ## 105   Unbound
    ## 106   Unbound
    ## 107   Unbound
    ## 108   Unbound
    ## 109   Unbound
    ## 110   Unbound
    ## 111   Unbound
    ## 112   Unbound
    ## 113   Unbound
    ## 114   Unbound
    ## 115   Unbound
    ## 116   Unbound
    ## 117   Unbound
    ## 118   Unbound
    ## 119   Unbound
    ## 120   Unbound

``` r
World$fetchData("SubCompartName")
```

    ##            SubCompart     SubCompartName
    ## 1    agriculturalsoil   agriculturalsoil
    ## 2                 air                air
    ## 3          cloudwater         cloudwater
    ## 4           deepocean          deepocean
    ## 5  freshwatersediment freshwatersediment
    ## 6                lake               lake
    ## 7        lakesediment       lakesediment
    ## 8      marinesediment     marinesediment
    ## 9         naturalsoil        naturalsoil
    ## 10          othersoil          othersoil
    ## 11              river              river
    ## 12                sea                sea

``` r
World$fetchData("ScaleName")
```

    ##         Scale   ScaleName
    ## 1      Arctic      Arctic
    ## 2 Continental Continental
    ## 3    Moderate    Moderate
    ## 4    Regional    Regional
    ## 5      Tropic      Tropic

``` r
test1 <- World$NewProcess("k_Erosion")
test1$execute()
```

    ##      process   fromSubCompart toSubCompart   fromScale     toScale fromSpecies
    ## 5  k_Erosion agriculturalsoil        river Continental Continental       Large
    ## 6  k_Erosion      naturalsoil        river Continental Continental       Large
    ## 7  k_Erosion        othersoil        river Continental Continental       Large
    ## 13 k_Erosion agriculturalsoil        river    Regional    Regional       Large
    ## 14 k_Erosion      naturalsoil        river    Regional    Regional       Large
    ## 15 k_Erosion        othersoil        river    Regional    Regional       Large
    ## 25 k_Erosion agriculturalsoil        river Continental Continental       Small
    ## 26 k_Erosion      naturalsoil        river Continental Continental       Small
    ## 27 k_Erosion        othersoil        river Continental Continental       Small
    ## 33 k_Erosion agriculturalsoil        river    Regional    Regional       Small
    ## 34 k_Erosion      naturalsoil        river    Regional    Regional       Small
    ## 35 k_Erosion        othersoil        river    Regional    Regional       Small
    ## 45 k_Erosion agriculturalsoil        river Continental Continental       Solid
    ## 46 k_Erosion      naturalsoil        river Continental Continental       Solid
    ## 47 k_Erosion        othersoil        river Continental Continental       Solid
    ## 53 k_Erosion agriculturalsoil        river    Regional    Regional       Solid
    ## 54 k_Erosion      naturalsoil        river    Regional    Regional       Solid
    ## 55 k_Erosion        othersoil        river    Regional    Regional       Solid
    ## 65 k_Erosion agriculturalsoil        river Continental Continental     Unbound
    ## 66 k_Erosion      naturalsoil        river Continental Continental     Unbound
    ## 67 k_Erosion        othersoil        river Continental Continental     Unbound
    ## 73 k_Erosion agriculturalsoil        river    Regional    Regional     Unbound
    ## 74 k_Erosion      naturalsoil        river    Regional    Regional     Unbound
    ## 75 k_Erosion        othersoil        river    Regional    Regional     Unbound
    ##    toSpecies            k
    ## 5      Large 1.099848e-11
    ## 6      Large 2.416961e-11
    ## 7      Large 2.416961e-11
    ## 13     Large 1.099848e-11
    ## 14     Large 2.416961e-11
    ## 15     Large 2.416961e-11
    ## 25     Small 1.099848e-11
    ## 26     Small 2.416961e-11
    ## 27     Small 2.416961e-11
    ## 33     Small 1.099848e-11
    ## 34     Small 2.416961e-11
    ## 35     Small 2.416961e-11
    ## 45     Solid 1.099848e-11
    ## 46     Solid 2.416961e-11
    ## 47     Solid 2.416961e-11
    ## 53     Solid 1.099848e-11
    ## 54     Solid 2.416961e-11
    ## 55     Solid 2.416961e-11
    ## 65   Unbound 1.099848e-11
    ## 66   Unbound 2.416961e-11
    ## 67   Unbound 2.416961e-11
    ## 73   Unbound 1.099848e-11
    ## 74   Unbound 2.416961e-11
    ## 75   Unbound 2.416961e-11

``` r
#testVar$execute(debugAt = list()) #an empty list always triggers
# test1$execute(debugAt = list(ScaleName = "Regional"))
#The actual execution of th eproces:
# test1$execute()

#AirFlow was calculated, but not stored; this can also be arranged by
# World$UpdateKaas() #which (tries to ) calculate all kaas

#which can be debugged, similar to variables:
# testClass$execute(debugAt = list(fromScale = "Continental"))

#and we can plot the DAG:
NodeAsText <- paste(World$nodelist$Params, "->" ,World$nodelist$Calc)
AllNodesAsText <- do.call(paste, c(as.list(NodeAsText), list(sep = ";")))
dag <- dagitty::dagitty(paste("dag{", AllNodesAsText, "}"))
plot(dagitty::graphLayout(dag))
```

![](7.3-OtherIntermedia_files/figure-gfm/unnamed-chunk-2-1.png)<!-- -->

``` r
#Replace the (saved) kaas of World
# World$UpdateKaas(mergeExisting = F)

# World$fetchData("Kscompw")
```

#### process calculation and where does it take place?

Where a process takes place is usually stored in one of the three
process table, which of the three depending on the dimension that is
crossed by the process. In this case it’s in SubCompartProcesses. Note

``` r
SubCompartProcesses <- World$fetchData("SubCompartProcesses")
SubCompartProcesses[SubCompartProcesses$process == "k_Erosion",]
```

    ##      process             from    to
    ## 43 k_Erosion agriculturalsoil river
    ## 44 k_Erosion      naturalsoil river
    ## 45 k_Erosion        othersoil river
    ## 46 k_Erosion        othersoil   sea

How can erosion go to river AND to sea? This is because there is no
subcompartment river in the global scales. To solve this, we have to
adjust the function to correct this. This is where the parameters
ScaleName and to.SubCompartName will be used for. We return NA for cases
that do not exists. (BTW there is always an automated check on states
\[boxes\] that do not exist.)

``` r
# k_Erosion <- function(relevant_depth_s,penetration_depth_s, EROSIONsoil, VertDistance, ScaleName, to.SubCompartName){
#   if (ScaleName %in% c("Regional", "Continental") & to.SubCompartName == "sea") {
#     return(NA)
#   } 
#   if ((ScaleName %in% c("Tropic", "Moderate", "Arctic")) & to.SubCompartName != "sea") {
#     return(NA)
#   } 
#   
#   EROSIONsoil * f_CORRsoil(VertDistance, relevant_depth_s, penetration_depth_s) / VertDistance #[s-1]
# }
# World$NewProcess("k_Erosion")
# World$UpdateKaas("k_Erosion")
# World$kaas
```

### Runoff

While we’re at it, we can do Runoff in a similar way. Here the formula
is: RAINrate \* FRACrun / Ksw \* CORRrunoff / VertDistance So we need
Ksw, which can be in the data, or you can apply a formulas depending on
the type of substance. See the vignette partitioning.Rmd.

``` r
World$fetchData("Kscompw")
```

    ##          Scale       SubCompart  Kscompw
    ## 6       Arctic      naturalsoil 23.29144
    ## 9  Continental agriculturalsoil 23.30411
    ## 17 Continental      naturalsoil 23.30411
    ## 18 Continental        othersoil 23.30411
    ## 26    Moderate      naturalsoil 23.30411
    ## 29    Regional agriculturalsoil 23.30411
    ## 37    Regional      naturalsoil 23.30411
    ## 38    Regional        othersoil 23.30411
    ## 46      Tropic      naturalsoil 23.32000

``` r
World$NewCalcVariable("Runoff")
World$CalcVar("Runoff" )
```

    ##          SubCompart       Scale      Runoff
    ## 3  agriculturalsoil    Regional    762.4557
    ## 5  agriculturalsoil Continental  11606.7414
    ## 41      naturalsoil      Arctic  33691.6540
    ## 42      naturalsoil Continental   5223.0336
    ## 43      naturalsoil    Moderate 215226.2494
    ## 44      naturalsoil    Regional    343.1051
    ## 45      naturalsoil      Tropic 395738.2040
    ## 46        othersoil Continental   1934.4569
    ## 49        othersoil    Regional    127.0760

``` r
World$FromDataAndTo("k_Runoff")
```

    ##      process   fromSubCompart toSubCompart   fromScale     toScale fromSpecies
    ## 41  k_Runoff agriculturalsoil        river      Arctic      Arctic       Small
    ## 42  k_Runoff      naturalsoil        river      Arctic      Arctic       Small
    ## 43  k_Runoff        othersoil        river      Arctic      Arctic       Small
    ## 44  k_Runoff        othersoil          sea      Arctic      Arctic       Small
    ## 45  k_Runoff agriculturalsoil        river Continental Continental       Small
    ## 46  k_Runoff      naturalsoil        river Continental Continental       Small
    ## 47  k_Runoff        othersoil        river Continental Continental       Small
    ## 48  k_Runoff        othersoil          sea Continental Continental       Small
    ## 49  k_Runoff agriculturalsoil        river    Moderate    Moderate       Small
    ## 50  k_Runoff      naturalsoil        river    Moderate    Moderate       Small
    ## 51  k_Runoff        othersoil        river    Moderate    Moderate       Small
    ## 52  k_Runoff        othersoil          sea    Moderate    Moderate       Small
    ## 53  k_Runoff agriculturalsoil        river    Regional    Regional       Small
    ## 54  k_Runoff      naturalsoil        river    Regional    Regional       Small
    ## 55  k_Runoff        othersoil        river    Regional    Regional       Small
    ## 56  k_Runoff        othersoil          sea    Regional    Regional       Small
    ## 57  k_Runoff agriculturalsoil        river      Tropic      Tropic       Small
    ## 58  k_Runoff      naturalsoil        river      Tropic      Tropic       Small
    ## 59  k_Runoff        othersoil        river      Tropic      Tropic       Small
    ## 60  k_Runoff        othersoil          sea      Tropic      Tropic       Small
    ## 61  k_Runoff agriculturalsoil        river      Arctic      Arctic       Solid
    ## 62  k_Runoff      naturalsoil        river      Arctic      Arctic       Solid
    ## 63  k_Runoff        othersoil        river      Arctic      Arctic       Solid
    ## 64  k_Runoff        othersoil          sea      Arctic      Arctic       Solid
    ## 65  k_Runoff agriculturalsoil        river Continental Continental       Solid
    ## 66  k_Runoff      naturalsoil        river Continental Continental       Solid
    ## 67  k_Runoff        othersoil        river Continental Continental       Solid
    ## 68  k_Runoff        othersoil          sea Continental Continental       Solid
    ## 69  k_Runoff agriculturalsoil        river    Moderate    Moderate       Solid
    ## 70  k_Runoff      naturalsoil        river    Moderate    Moderate       Solid
    ## 71  k_Runoff        othersoil        river    Moderate    Moderate       Solid
    ## 72  k_Runoff        othersoil          sea    Moderate    Moderate       Solid
    ## 73  k_Runoff agriculturalsoil        river    Regional    Regional       Solid
    ## 74  k_Runoff      naturalsoil        river    Regional    Regional       Solid
    ## 75  k_Runoff        othersoil        river    Regional    Regional       Solid
    ## 76  k_Runoff        othersoil          sea    Regional    Regional       Solid
    ## 77  k_Runoff agriculturalsoil        river      Tropic      Tropic       Solid
    ## 78  k_Runoff      naturalsoil        river      Tropic      Tropic       Solid
    ## 79  k_Runoff        othersoil        river      Tropic      Tropic       Solid
    ## 80  k_Runoff        othersoil          sea      Tropic      Tropic       Solid
    ## 81  k_Runoff agriculturalsoil        river      Arctic      Arctic     Unbound
    ## 82  k_Runoff      naturalsoil        river      Arctic      Arctic     Unbound
    ## 83  k_Runoff        othersoil        river      Arctic      Arctic     Unbound
    ## 84  k_Runoff        othersoil          sea      Arctic      Arctic     Unbound
    ## 85  k_Runoff agriculturalsoil        river Continental Continental     Unbound
    ## 86  k_Runoff      naturalsoil        river Continental Continental     Unbound
    ## 87  k_Runoff        othersoil        river Continental Continental     Unbound
    ## 88  k_Runoff        othersoil          sea Continental Continental     Unbound
    ## 89  k_Runoff agriculturalsoil        river    Moderate    Moderate     Unbound
    ## 90  k_Runoff      naturalsoil        river    Moderate    Moderate     Unbound
    ## 91  k_Runoff        othersoil        river    Moderate    Moderate     Unbound
    ## 92  k_Runoff        othersoil          sea    Moderate    Moderate     Unbound
    ## 93  k_Runoff agriculturalsoil        river    Regional    Regional     Unbound
    ## 94  k_Runoff      naturalsoil        river    Regional    Regional     Unbound
    ## 95  k_Runoff        othersoil        river    Regional    Regional     Unbound
    ## 96  k_Runoff        othersoil          sea    Regional    Regional     Unbound
    ## 97  k_Runoff agriculturalsoil        river      Tropic      Tropic     Unbound
    ## 98  k_Runoff      naturalsoil        river      Tropic      Tropic     Unbound
    ## 99  k_Runoff        othersoil        river      Tropic      Tropic     Unbound
    ## 100 k_Runoff        othersoil          sea      Tropic      Tropic     Unbound
    ##     toSpecies
    ## 41      Small
    ## 42      Small
    ## 43      Small
    ## 44      Small
    ## 45      Small
    ## 46      Small
    ## 47      Small
    ## 48      Small
    ## 49      Small
    ## 50      Small
    ## 51      Small
    ## 52      Small
    ## 53      Small
    ## 54      Small
    ## 55      Small
    ## 56      Small
    ## 57      Small
    ## 58      Small
    ## 59      Small
    ## 60      Small
    ## 61      Solid
    ## 62      Solid
    ## 63      Solid
    ## 64      Solid
    ## 65      Solid
    ## 66      Solid
    ## 67      Solid
    ## 68      Solid
    ## 69      Solid
    ## 70      Solid
    ## 71      Solid
    ## 72      Solid
    ## 73      Solid
    ## 74      Solid
    ## 75      Solid
    ## 76      Solid
    ## 77      Solid
    ## 78      Solid
    ## 79      Solid
    ## 80      Solid
    ## 81    Unbound
    ## 82    Unbound
    ## 83    Unbound
    ## 84    Unbound
    ## 85    Unbound
    ## 86    Unbound
    ## 87    Unbound
    ## 88    Unbound
    ## 89    Unbound
    ## 90    Unbound
    ## 91    Unbound
    ## 92    Unbound
    ## 93    Unbound
    ## 94    Unbound
    ## 95    Unbound
    ## 96    Unbound
    ## 97    Unbound
    ## 98    Unbound
    ## 99    Unbound
    ## 100   Unbound

``` r
test1 <- World$NewProcess("k_Runoff")

test1$execute()
```

    ##     process   fromSubCompart toSubCompart   fromScale     toScale fromSpecies
    ## 5  k_Runoff agriculturalsoil        river Continental Continental       Small
    ## 6  k_Runoff      naturalsoil        river Continental Continental       Small
    ## 7  k_Runoff        othersoil        river Continental Continental       Small
    ## 13 k_Runoff agriculturalsoil        river    Regional    Regional       Small
    ## 14 k_Runoff      naturalsoil        river    Regional    Regional       Small
    ## 15 k_Runoff        othersoil        river    Regional    Regional       Small
    ## 25 k_Runoff agriculturalsoil        river Continental Continental       Solid
    ## 26 k_Runoff      naturalsoil        river Continental Continental       Solid
    ## 27 k_Runoff        othersoil        river Continental Continental       Solid
    ## 33 k_Runoff agriculturalsoil        river    Regional    Regional       Solid
    ## 34 k_Runoff      naturalsoil        river    Regional    Regional       Solid
    ## 35 k_Runoff        othersoil        river    Regional    Regional       Solid
    ## 45 k_Runoff agriculturalsoil        river Continental Continental     Unbound
    ## 46 k_Runoff      naturalsoil        river Continental Continental     Unbound
    ## 47 k_Runoff        othersoil        river Continental Continental     Unbound
    ## 53 k_Runoff agriculturalsoil        river    Regional    Regional     Unbound
    ## 54 k_Runoff      naturalsoil        river    Regional    Regional     Unbound
    ## 55 k_Runoff        othersoil        river    Regional    Regional     Unbound
    ##    toSpecies            k
    ## 5      Small 6.417763e-08
    ## 6      Small 1.410329e-07
    ## 7      Small 1.410329e-07
    ## 13     Small 6.417763e-08
    ## 14     Small 1.410329e-07
    ## 15     Small 1.410329e-07
    ## 25     Solid 6.417763e-08
    ## 26     Solid 1.410329e-07
    ## 27     Solid 1.410329e-07
    ## 33     Solid 6.417763e-08
    ## 34     Solid 1.410329e-07
    ## 35     Solid 1.410329e-07
    ## 45   Unbound 2.753919e-09
    ## 46   Unbound 6.051849e-09
    ## 47   Unbound 6.051849e-09
    ## 53   Unbound 2.753919e-09
    ## 54   Unbound 6.051849e-09
    ## 55   Unbound 6.051849e-09

``` r
#testVar$execute(debugAt = list()) #an empty list always triggers
# test1$execute(debugAt = list(ScaleName = "Regional"))
#The actual execution of th eproces:
# test1$execute()


SubCompartProcesses <- World$fetchData("SubCompartProcesses")
SubCompartProcesses[SubCompartProcesses$process == "k_Runoff",]
```

    ##     process             from    to
    ## 54 k_Runoff agriculturalsoil river
    ## 55 k_Runoff      naturalsoil river
    ## 56 k_Runoff        othersoil river
    ## 57 k_Runoff        othersoil   sea

## Sedimentation

The water subcompartments are comonly refered to as river, but this
might be better suited to be called freshwater? In any way the sediment
compartment is currently konwn by freshwatersediment.

Sedimentation rate depends on the settling velocity of the particle,
which is calculated according the functions given below; Note that for
Molecular species - all classic substances! - the settling velocity in
excel is set at 2.5 m/day. In SB OO this is calculated using Stokes for
SPM particle.

## v_functions and f_functions

SB OO uses functions in different ways. Some functions define the
calculation of a state-variable aka landscape-variable. These functions
will be passed (by name) to the method NewCalcVariable of a SBcore
object, like World. Once a state-variable is calculated is is stored
within the SBcore object and can be fetched, and therefore automatically
used for process calculation, or for other state-variables. This
function for the settlingvelocity is more generic, and will be used more
generic than just for the state variable of nano species. Therefor every
function that uses f_SettlingVelocity() must provide it with the correct
variables. A feature of defining functions is that parameters should be
atomic. This enables easy use of if-then-else constructions. This
construction is not possible if the if condition argument contains a
vector. (You would have to use the ifelse function.) (See AAAreadme.R in
the SB project for more on file naming conventions)

## The process

For the Molecular species we use the settling rate of the SPM particle.
This settling rate ia also needed to assess the build-up of the sediment
layer, resuspention and burial. Therefore it is convenient to define it
as a variable. For Nano materials, the process rate is settling velocity
divided by the depth of the layer. Because SettlingVelocity is a regular
function (“f_SettlingVelocity”) all the parameters for the settling are
also needed. See the defining function (sources from newAlgorithmScripts
at the moment):

``` r
k_Sedimentation
```

    ## function (FRinw, SettlingVelocity, DynViscWaterStandard, VertDistance, 
    ##     from.RhoCP, from.RadCP, SpeciesName, SubCompartName, ScaleName) 
    ## {
    ##     if ((ScaleName %in% c("Tropic", "Moderate", "Arctic")) & 
    ##         SubCompartName == "sea") {
    ##         return(NA)
    ##     }
    ##     if (SpeciesName == "Molecular") {
    ##         SetlingVelocityCP <- f_SetVelWater(radius = from.RadCP, 
    ##             rhoParticle = from.RhoCP, rhoWater = 998, DynViscWaterStandard)
    ##         return(SetlingVelocityCP * (1 - FRinw)/VertDistance)
    ##     }
    ##     else SettlingVelocity/VertDistance
    ## }

``` r
World$fetchData("FRinw")
```

    ##          Scale       SubCompart       FRinw
    ## 3       Arctic        deepocean 0.999395597
    ## 4       Arctic             lake 0.999741590
    ## 6       Arctic      naturalsoil 0.008586844
    ## 7       Arctic            river 0.998627579
    ## 8       Arctic              sea 0.999395597
    ## 9  Continental agriculturalsoil 0.008582178
    ## 12 Continental        deepocean 0.999395597
    ## 14 Continental             lake 0.999741590
    ## 17 Continental      naturalsoil 0.008582178
    ## 18 Continental        othersoil 0.008582178
    ## 19 Continental            river 0.998627579
    ## 20 Continental              sea 0.999395597
    ## 23    Moderate        deepocean 0.999395597
    ## 24    Moderate             lake 0.999741590
    ## 26    Moderate      naturalsoil 0.008582178
    ## 27    Moderate            river 0.998627579
    ## 28    Moderate              sea 0.999395597
    ## 29    Regional agriculturalsoil 0.008582178
    ## 32    Regional        deepocean 0.999395597
    ## 34    Regional             lake 0.999741590
    ## 37    Regional      naturalsoil 0.008582178
    ## 38    Regional        othersoil 0.008582178
    ## 39    Regional            river 0.998627579
    ## 40    Regional              sea 0.999395597
    ## 43      Tropic        deepocean 0.999395597
    ## 44      Tropic             lake 0.999741590
    ## 46      Tropic      naturalsoil 0.008576330
    ## 47      Tropic            river 0.998627579
    ## 48      Tropic              sea 0.999395597

``` r
World$fetchData("SettlingVelocity")
```

    ## [1] NA

``` r
World$fetchData("DynViscWaterStandard")
```

    ## [1] 0.001002

``` r
World$fetchData("VertDistance")
```

    ##          Scale         SubCompart VertDistance
    ## 1       Arctic                air        1e+03
    ## 2       Arctic         cloudwater        1e+03
    ## 3       Arctic          deepocean        3e+03
    ## 5       Arctic     marinesediment        3e-02
    ## 6       Arctic        naturalsoil        5e-02
    ## 8       Arctic                sea        1e+02
    ## 9  Continental   agriculturalsoil        2e-01
    ## 10 Continental                air        1e+03
    ## 11 Continental         cloudwater        1e+03
    ## 13 Continental freshwatersediment        3e-02
    ## 14 Continental               lake        1e+02
    ## 15 Continental       lakesediment        3e-02
    ## 16 Continental     marinesediment        3e-02
    ## 17 Continental        naturalsoil        5e-02
    ## 18 Continental          othersoil        5e-02
    ## 19 Continental              river        3e+00
    ## 20 Continental                sea        2e+02
    ## 21    Moderate                air        1e+03
    ## 22    Moderate         cloudwater        1e+03
    ## 23    Moderate          deepocean        3e+03
    ## 25    Moderate     marinesediment        3e-02
    ## 26    Moderate        naturalsoil        5e-02
    ## 28    Moderate                sea        1e+02
    ## 29    Regional   agriculturalsoil        2e-01
    ## 30    Regional                air        1e+03
    ## 31    Regional         cloudwater        1e+03
    ## 33    Regional freshwatersediment        3e-02
    ## 34    Regional               lake        1e+02
    ## 35    Regional       lakesediment        3e-02
    ## 36    Regional     marinesediment        3e-02
    ## 37    Regional        naturalsoil        5e-02
    ## 38    Regional          othersoil        5e-02
    ## 39    Regional              river        3e+00
    ## 40    Regional                sea        1e+01
    ## 41      Tropic                air        1e+03
    ## 42      Tropic         cloudwater        1e+03
    ## 43      Tropic          deepocean        3e+03
    ## 45      Tropic     marinesediment        3e-02
    ## 46      Tropic        naturalsoil        5e-02
    ## 48      Tropic                sea        1e+02

``` r
World$fetchData("RhoCP")
```

    ##            SubCompart RhoCP
    ## 1    agriculturalsoil  2500
    ## 2                 air  2000
    ## 4           deepocean  2500
    ## 5  freshwatersediment  2500
    ## 6                lake  2500
    ## 7        lakesediment  2500
    ## 8      marinesediment  2500
    ## 9         naturalsoil  2500
    ## 10          othersoil  2500
    ## 11              river  2500
    ## 12                sea  2500

``` r
World$fetchData("RadCP")
```

    ##            SubCompart    RadCP
    ## 1    agriculturalsoil 1.28e-04
    ## 2                 air 9.00e-07
    ## 4           deepocean 3.00e-06
    ## 5  freshwatersediment 1.28e-04
    ## 6                lake 3.00e-06
    ## 7        lakesediment 1.28e-04
    ## 8      marinesediment 1.28e-04
    ## 9         naturalsoil 1.28e-04
    ## 10          othersoil 1.28e-04
    ## 11              river 3.00e-06
    ## 12                sea 3.00e-06

Sedimentation is directly to the sediment below.

``` r
World$NewCalcVariable("rho_species")
World$CalcVar("rho_species" )
```

    ##           Scale         SubCompart Species rho_species
    ## 2        Arctic freshwatersediment   Solid    5000.000
    ## 5        Arctic   agriculturalsoil   Large    2500.000
    ## 6        Arctic               lake   Solid    5000.000
    ## 9        Arctic freshwatersediment   Small    2000.000
    ## 10       Arctic                air   Solid    5000.000
    ## 11       Arctic          othersoil   Large    2500.000
    ## 12       Arctic          deepocean   Small    2000.000
    ## 13       Arctic          deepocean   Solid    5000.000
    ## 16       Arctic freshwatersediment   Large    2500.000
    ## 17       Arctic       lakesediment   Solid    5000.000
    ## 18       Arctic              river   Solid    5000.000
    ## 19       Arctic   agriculturalsoil   Small    2000.000
    ## 20       Arctic                air   Large    2000.000
    ## 23       Arctic         cloudwater   Solid    5000.000
    ## 24       Arctic        naturalsoil   Solid    5000.000
    ## 25       Arctic     marinesediment   Large    2500.000
    ## 26       Arctic              river   Large    2500.000
    ## 27       Arctic   agriculturalsoil   Solid    5000.000
    ## 28       Arctic                sea   Small    2000.000
    ## 29       Arctic               lake   Large    2500.000
    ## 31       Arctic                sea   Solid    5000.000
    ## 32       Arctic               lake   Small    2000.000
    ## 34       Arctic        naturalsoil   Small    2000.000
    ## 35       Arctic              river   Small    2000.000
    ## 36       Arctic          deepocean   Large    2500.000
    ## 37       Arctic       lakesediment   Large    2500.000
    ## 38       Arctic          othersoil   Solid    5000.000
    ## 39       Arctic          othersoil   Small    2000.000
    ## 40       Arctic       lakesediment   Small    2000.000
    ## 42       Arctic        naturalsoil   Large    2500.000
    ## 43       Arctic     marinesediment   Solid    5000.000
    ## 44       Arctic                air   Small    1996.063
    ## 45       Arctic     marinesediment   Small    2000.000
    ## 46       Arctic                sea   Large    2500.000
    ## 48  Continental freshwatersediment   Large    2500.000
    ## 49  Continental       lakesediment   Small    2000.000
    ## 51  Continental       lakesediment   Large    2500.000
    ## 52  Continental   agriculturalsoil   Small    2000.000
    ## 53  Continental       lakesediment   Solid    5000.000
    ## 55  Continental        naturalsoil   Large    2500.000
    ## 56  Continental   agriculturalsoil   Large    2500.000
    ## 58  Continental   agriculturalsoil   Solid    5000.000
    ## 59  Continental        naturalsoil   Solid    5000.000
    ## 61  Continental                air   Small    1996.063
    ## 62  Continental          deepocean   Solid    5000.000
    ## 63  Continental          deepocean   Large    2500.000
    ## 64  Continental          othersoil   Large    2500.000
    ## 65  Continental              river   Large    2500.000
    ## 66  Continental         cloudwater   Solid    5000.000
    ## 69  Continental          deepocean   Small    2000.000
    ## 73  Continental     marinesediment   Small    2000.000
    ## 74  Continental        naturalsoil   Small    2000.000
    ## 75  Continental                air   Large    2000.000
    ## 78  Continental                air   Solid    5000.000
    ## 79  Continental freshwatersediment   Solid    5000.000
    ## 80  Continental                sea   Small    2000.000
    ## 81  Continental               lake   Small    2000.000
    ## 83  Continental               lake   Large    2500.000
    ## 84  Continental     marinesediment   Solid    5000.000
    ## 85  Continental          othersoil   Small    2000.000
    ## 86  Continental                sea   Solid    5000.000
    ## 87  Continental              river   Small    2000.000
    ## 88  Continental               lake   Solid    5000.000
    ## 89  Continental freshwatersediment   Small    2000.000
    ## 90  Continental          othersoil   Solid    5000.000
    ## 91  Continental     marinesediment   Large    2500.000
    ## 92  Continental                sea   Large    2500.000
    ## 93  Continental              river   Solid    5000.000
    ## 96     Moderate               lake   Small    2000.000
    ## 97     Moderate        naturalsoil   Small    2000.000
    ## 98     Moderate   agriculturalsoil   Solid    5000.000
    ## 100    Moderate   agriculturalsoil   Small    2000.000
    ## 101    Moderate          deepocean   Solid    5000.000
    ## 103    Moderate                air   Large    2000.000
    ## 104    Moderate          deepocean   Large    2500.000
    ## 105    Moderate        naturalsoil   Solid    5000.000
    ## 106    Moderate   agriculturalsoil   Large    2500.000
    ## 108    Moderate         cloudwater   Solid    5000.000
    ## 109    Moderate freshwatersediment   Small    2000.000
    ## 110    Moderate          othersoil   Large    2500.000
    ## 111    Moderate          deepocean   Small    2000.000
    ## 114    Moderate                sea   Solid    5000.000
    ## 115    Moderate               lake   Large    2500.000
    ## 116    Moderate                air   Small    1996.063
    ## 117    Moderate        naturalsoil   Large    2500.000
    ## 118    Moderate                sea   Small    2000.000
    ## 119    Moderate                air   Solid    5000.000
    ## 120    Moderate     marinesediment   Large    2500.000
    ## 121    Moderate               lake   Solid    5000.000
    ## 123    Moderate              river   Solid    5000.000
    ## 124    Moderate              river   Small    2000.000
    ## 127    Moderate     marinesediment   Small    2000.000
    ## 128    Moderate     marinesediment   Solid    5000.000
    ## 129    Moderate                sea   Large    2500.000
    ## 130    Moderate          othersoil   Small    2000.000
    ## 131    Moderate              river   Large    2500.000
    ## 132    Moderate       lakesediment   Large    2500.000
    ## 133    Moderate freshwatersediment   Large    2500.000
    ## 134    Moderate       lakesediment   Solid    5000.000
    ## 135    Moderate       lakesediment   Small    2000.000
    ## 136    Moderate          othersoil   Solid    5000.000
    ## 137    Moderate freshwatersediment   Solid    5000.000
    ## 142    Regional                air   Small    1996.063
    ## 143    Regional          deepocean   Solid    5000.000
    ## 146    Regional                air   Solid    5000.000
    ## 147    Regional                air   Large    2000.000
    ## 148    Regional freshwatersediment   Solid    5000.000
    ## 150    Regional freshwatersediment   Small    2000.000
    ## 151    Regional   agriculturalsoil   Solid    5000.000
    ## 152    Regional     marinesediment   Large    2500.000
    ## 153    Regional              river   Large    2500.000
    ## 154    Regional          deepocean   Large    2500.000
    ## 156    Regional          deepocean   Small    2000.000
    ## 157    Regional        naturalsoil   Small    2000.000
    ## 158    Regional         cloudwater   Solid    5000.000
    ## 159    Regional   agriculturalsoil   Large    2500.000
    ## 160    Regional          othersoil   Solid    5000.000
    ## 161    Regional freshwatersediment   Large    2500.000
    ## 162    Regional       lakesediment   Small    2000.000
    ## 163    Regional              river   Solid    5000.000
    ## 164    Regional       lakesediment   Large    2500.000
    ## 165    Regional        naturalsoil   Large    2500.000
    ## 168    Regional       lakesediment   Solid    5000.000
    ## 170    Regional   agriculturalsoil   Small    2000.000
    ## 171    Regional                sea   Large    2500.000
    ## 173    Regional              river   Small    2000.000
    ## 175    Regional               lake   Large    2500.000
    ## 176    Regional                sea   Solid    5000.000
    ## 177    Regional     marinesediment   Small    2000.000
    ## 178    Regional                sea   Small    2000.000
    ## 179    Regional          othersoil   Small    2000.000
    ## 181    Regional        naturalsoil   Solid    5000.000
    ## 182    Regional               lake   Small    2000.000
    ## 183    Regional          othersoil   Large    2500.000
    ## 184    Regional               lake   Solid    5000.000
    ## 188    Regional     marinesediment   Solid    5000.000
    ## 189      Tropic   agriculturalsoil   Small    2000.000
    ## 190      Tropic                air   Large    2000.000
    ## 192      Tropic       lakesediment   Small    2000.000
    ## 194      Tropic                air   Solid    5000.000
    ## 195      Tropic          othersoil   Small    2000.000
    ## 196      Tropic   agriculturalsoil   Solid    5000.000
    ## 198      Tropic                sea   Solid    5000.000
    ## 199      Tropic        naturalsoil   Large    2500.000
    ## 201      Tropic   agriculturalsoil   Large    2500.000
    ## 202      Tropic                air   Small    1996.063
    ## 203      Tropic          deepocean   Large    2500.000
    ## 205      Tropic               lake   Solid    5000.000
    ## 207      Tropic          othersoil   Large    2500.000
    ## 209      Tropic freshwatersediment   Large    2500.000
    ## 210      Tropic          deepocean   Small    2000.000
    ## 211      Tropic               lake   Large    2500.000
    ## 212      Tropic freshwatersediment   Solid    5000.000
    ## 213      Tropic       lakesediment   Large    2500.000
    ## 216      Tropic     marinesediment   Large    2500.000
    ## 217      Tropic freshwatersediment   Small    2000.000
    ## 219      Tropic              river   Large    2500.000
    ## 221      Tropic       lakesediment   Solid    5000.000
    ## 223      Tropic          othersoil   Solid    5000.000
    ## 224      Tropic        naturalsoil   Solid    5000.000
    ## 225      Tropic          deepocean   Solid    5000.000
    ## 226      Tropic        naturalsoil   Small    2000.000
    ## 228      Tropic                sea   Large    2500.000
    ## 229      Tropic               lake   Small    2000.000
    ## 230      Tropic         cloudwater   Solid    5000.000
    ## 231      Tropic              river   Small    2000.000
    ## 232      Tropic     marinesediment   Solid    5000.000
    ## 233      Tropic     marinesediment   Small    2000.000
    ## 234      Tropic              river   Solid    5000.000
    ## 235      Tropic                sea   Small    2000.000

``` r
World$NewCalcVariable("rad_species")
World$CalcVar("rad_species" )
```

    ##           Scale         SubCompart Species  rad_species
    ## 2        Arctic                air   Small 4.535242e-08
    ## 3        Arctic       lakesediment   Solid 1.000000e-17
    ## 4        Arctic         cloudwater   Solid 1.000000e-17
    ## 5        Arctic               lake   Small 1.500000e-07
    ## 7        Arctic          deepocean   Large 3.000000e-06
    ## 8        Arctic          othersoil   Large 1.280000e-04
    ## 9        Arctic   agriculturalsoil   Large 1.280000e-04
    ## 11       Arctic                air   Large 9.000000e-07
    ## 12       Arctic          deepocean   Solid 1.000000e-17
    ## 16       Arctic freshwatersediment   Solid 1.000000e-17
    ## 17       Arctic freshwatersediment   Large 1.280000e-04
    ## 18       Arctic              river   Large 3.000000e-06
    ## 20       Arctic        naturalsoil   Large 1.280000e-04
    ## 21       Arctic freshwatersediment   Small 1.500000e-07
    ## 22       Arctic              river   Small 1.500000e-07
    ## 23       Arctic              river   Solid 1.000000e-17
    ## 24       Arctic       lakesediment   Large 1.280000e-04
    ## 25       Arctic          deepocean   Small 1.500000e-07
    ## 26       Arctic     marinesediment   Large 1.280000e-04
    ## 27       Arctic       lakesediment   Small 1.500000e-07
    ## 29       Arctic          othersoil   Small 1.500000e-07
    ## 30       Arctic        naturalsoil   Solid 1.000000e-17
    ## 31       Arctic               lake   Large 3.000000e-06
    ## 33       Arctic     marinesediment   Small 1.500000e-07
    ## 35       Arctic   agriculturalsoil   Solid 1.000000e-17
    ## 37       Arctic   agriculturalsoil   Small 1.500000e-07
    ## 38       Arctic                air   Solid 1.000000e-17
    ## 39       Arctic        naturalsoil   Small 1.500000e-07
    ## 40       Arctic                sea   Large 3.000000e-06
    ## 41       Arctic                sea   Solid 1.000000e-17
    ## 42       Arctic     marinesediment   Solid 1.000000e-17
    ## 44       Arctic          othersoil   Solid 1.000000e-17
    ## 45       Arctic               lake   Solid 1.000000e-17
    ## 47       Arctic                sea   Small 1.500000e-07
    ## 50  Continental freshwatersediment   Solid 1.000000e-17
    ## 51  Continental       lakesediment   Large 1.280000e-04
    ## 52  Continental        naturalsoil   Solid 1.000000e-17
    ## 53  Continental                air   Solid 1.000000e-17
    ## 54  Continental               lake   Large 3.000000e-06
    ## 55  Continental          deepocean   Large 3.000000e-06
    ## 56  Continental        naturalsoil   Large 1.280000e-04
    ## 57  Continental                air   Small 4.535242e-08
    ## 58  Continental freshwatersediment   Large 1.280000e-04
    ## 59  Continental     marinesediment   Large 1.280000e-04
    ## 60  Continental     marinesediment   Solid 1.000000e-17
    ## 61  Continental                sea   Solid 1.000000e-17
    ## 63  Continental       lakesediment   Small 1.500000e-07
    ## 64  Continental          othersoil   Small 1.500000e-07
    ## 65  Continental     marinesediment   Small 1.500000e-07
    ## 66  Continental          deepocean   Solid 1.000000e-17
    ## 67  Continental       lakesediment   Solid 1.000000e-17
    ## 69  Continental                sea   Large 3.000000e-06
    ## 70  Continental               lake   Solid 1.000000e-17
    ## 71  Continental          deepocean   Small 1.500000e-07
    ## 72  Continental        naturalsoil   Small 1.500000e-07
    ## 74  Continental freshwatersediment   Small 1.500000e-07
    ## 76  Continental   agriculturalsoil   Large 1.280000e-04
    ## 77  Continental              river   Large 3.000000e-06
    ## 78  Continental          othersoil   Solid 1.000000e-17
    ## 79  Continental              river   Solid 1.000000e-17
    ## 80  Continental                air   Large 9.000000e-07
    ## 82  Continental   agriculturalsoil   Small 1.500000e-07
    ## 86  Continental          othersoil   Large 1.280000e-04
    ## 87  Continental                sea   Small 1.500000e-07
    ## 89  Continental   agriculturalsoil   Solid 1.000000e-17
    ## 91  Continental               lake   Small 1.500000e-07
    ## 92  Continental              river   Small 1.500000e-07
    ## 93  Continental         cloudwater   Solid 1.000000e-17
    ## 95     Moderate   agriculturalsoil   Large 1.280000e-04
    ## 96     Moderate   agriculturalsoil   Solid 1.000000e-17
    ## 97     Moderate        naturalsoil   Small 1.500000e-07
    ## 101    Moderate                air   Solid 1.000000e-17
    ## 102    Moderate   agriculturalsoil   Small 1.500000e-07
    ## 103    Moderate          othersoil   Small 1.500000e-07
    ## 104    Moderate          deepocean   Large 3.000000e-06
    ## 105    Moderate        naturalsoil   Solid 1.000000e-17
    ## 108    Moderate         cloudwater   Solid 1.000000e-17
    ## 109    Moderate               lake   Small 1.500000e-07
    ## 110    Moderate          othersoil   Large 1.280000e-04
    ## 111    Moderate          deepocean   Small 1.500000e-07
    ## 114    Moderate                sea   Solid 1.000000e-17
    ## 115    Moderate                air   Large 9.000000e-07
    ## 117    Moderate        naturalsoil   Large 1.280000e-04
    ## 118    Moderate                sea   Small 1.500000e-07
    ## 119    Moderate       lakesediment   Large 1.280000e-04
    ## 120    Moderate     marinesediment   Large 1.280000e-04
    ## 121    Moderate               lake   Solid 1.000000e-17
    ## 122    Moderate freshwatersediment   Small 1.500000e-07
    ## 123    Moderate              river   Solid 1.000000e-17
    ## 124    Moderate              river   Small 1.500000e-07
    ## 125    Moderate freshwatersediment   Solid 1.000000e-17
    ## 126    Moderate       lakesediment   Small 1.500000e-07
    ## 127    Moderate     marinesediment   Small 1.500000e-07
    ## 128    Moderate     marinesediment   Solid 1.000000e-17
    ## 130    Moderate                sea   Large 3.000000e-06
    ## 133    Moderate                air   Small 4.535242e-08
    ## 134    Moderate freshwatersediment   Large 1.280000e-04
    ## 136    Moderate       lakesediment   Solid 1.000000e-17
    ## 137    Moderate          deepocean   Solid 1.000000e-17
    ## 139    Moderate          othersoil   Solid 1.000000e-17
    ## 140    Moderate              river   Large 3.000000e-06
    ## 141    Moderate               lake   Large 3.000000e-06
    ## 142    Regional       lakesediment   Large 1.280000e-04
    ## 145    Regional   agriculturalsoil   Solid 1.000000e-17
    ## 146    Regional                sea   Small 1.500000e-07
    ## 147    Regional       lakesediment   Small 1.500000e-07
    ## 148    Regional              river   Solid 1.000000e-17
    ## 149    Regional                air   Large 9.000000e-07
    ## 151    Regional        naturalsoil   Small 1.500000e-07
    ## 154    Regional freshwatersediment   Small 1.500000e-07
    ## 155    Regional               lake   Solid 1.000000e-17
    ## 156    Regional freshwatersediment   Solid 1.000000e-17
    ## 158    Regional                sea   Solid 1.000000e-17
    ## 159    Regional          deepocean   Large 3.000000e-06
    ## 160    Regional          othersoil   Small 1.500000e-07
    ## 161    Regional   agriculturalsoil   Large 1.280000e-04
    ## 162    Regional               lake   Small 1.500000e-07
    ## 163    Regional   agriculturalsoil   Small 1.500000e-07
    ## 164    Regional       lakesediment   Solid 1.000000e-17
    ## 165    Regional                air   Solid 1.000000e-17
    ## 166    Regional          othersoil   Large 1.280000e-04
    ## 171    Regional freshwatersediment   Large 1.280000e-04
    ## 172    Regional              river   Large 3.000000e-06
    ## 173    Regional     marinesediment   Small 1.500000e-07
    ## 174    Regional                air   Small 4.535242e-08
    ## 175    Regional         cloudwater   Solid 1.000000e-17
    ## 176    Regional        naturalsoil   Solid 1.000000e-17
    ## 179    Regional     marinesediment   Solid 1.000000e-17
    ## 180    Regional                sea   Large 3.000000e-06
    ## 181    Regional          deepocean   Solid 1.000000e-17
    ## 182    Regional               lake   Large 3.000000e-06
    ## 183    Regional        naturalsoil   Large 1.280000e-04
    ## 184    Regional          deepocean   Small 1.500000e-07
    ## 186    Regional              river   Small 1.500000e-07
    ## 187    Regional          othersoil   Solid 1.000000e-17
    ## 188    Regional     marinesediment   Large 1.280000e-04
    ## 189      Tropic       lakesediment   Small 1.500000e-07
    ## 190      Tropic         cloudwater   Solid 1.000000e-17
    ## 191      Tropic          othersoil   Solid 1.000000e-17
    ## 192      Tropic   agriculturalsoil   Small 1.500000e-07
    ## 194      Tropic   agriculturalsoil   Solid 1.000000e-17
    ## 195      Tropic       lakesediment   Solid 1.000000e-17
    ## 196      Tropic          deepocean   Small 1.500000e-07
    ## 200      Tropic        naturalsoil   Large 1.280000e-04
    ## 201      Tropic freshwatersediment   Solid 1.000000e-17
    ## 203      Tropic                air   Large 9.000000e-07
    ## 204      Tropic freshwatersediment   Small 1.500000e-07
    ## 205      Tropic freshwatersediment   Large 1.280000e-04
    ## 206      Tropic     marinesediment   Large 1.280000e-04
    ## 207      Tropic                sea   Large 3.000000e-06
    ## 208      Tropic       lakesediment   Large 1.280000e-04
    ## 209      Tropic     marinesediment   Solid 1.000000e-17
    ## 211      Tropic          othersoil   Small 1.500000e-07
    ## 213      Tropic                air   Solid 1.000000e-17
    ## 214      Tropic                air   Small 4.535242e-08
    ## 216      Tropic          othersoil   Large 1.280000e-04
    ## 218      Tropic               lake   Small 1.500000e-07
    ## 219      Tropic              river   Large 3.000000e-06
    ## 220      Tropic               lake   Large 3.000000e-06
    ## 221      Tropic        naturalsoil   Solid 1.000000e-17
    ## 222      Tropic          deepocean   Large 3.000000e-06
    ## 225      Tropic              river   Solid 1.000000e-17
    ## 226      Tropic                sea   Solid 1.000000e-17
    ## 227      Tropic        naturalsoil   Small 1.500000e-07
    ## 228      Tropic          deepocean   Solid 1.000000e-17
    ## 229      Tropic     marinesediment   Small 1.500000e-07
    ## 230      Tropic                sea   Small 1.500000e-07
    ## 231      Tropic   agriculturalsoil   Large 1.280000e-04
    ## 234      Tropic               lake   Solid 1.000000e-17
    ## 235      Tropic              river   Small 1.500000e-07

``` r
World$NewCalcVariable("SettlingVelocity")
World$CalcVar("SettlingVelocity" )
```

    ##     SubCompart       Scale Species SettlingVelocity
    ## 21         air      Arctic   Solid     6.752833e-16
    ## 22         air Continental   Small     1.516945e-06
    ## 23         air      Arctic   Small     1.516945e-06
    ## 24         air    Moderate   Small     1.516945e-06
    ## 25         air    Moderate   Solid     6.752833e-16
    ## 26         air Continental   Solid     6.752833e-16
    ## 27         air    Regional   Small     1.516945e-06
    ## 28         air    Regional   Solid     6.752833e-16
    ## 29         air Continental   Large     2.112547e-04
    ## 30         air    Regional   Large     2.112547e-04
    ## 31         air      Arctic   Large     2.112547e-04
    ## 32         air    Moderate   Large     2.112547e-04
    ## 33         air      Tropic   Large     2.112547e-04
    ## 34         air      Tropic   Small     1.516945e-06
    ## 35         air      Tropic   Solid     6.752833e-16
    ## 56   deepocean      Tropic   Small     4.903325e-08
    ## 57   deepocean Continental   Small     4.903325e-08
    ## 58   deepocean      Arctic   Small     4.903325e-08
    ## 59   deepocean      Tropic   Solid     8.703973e-28
    ## 60   deepocean      Tropic   Large     2.940037e-05
    ## 61   deepocean Continental   Solid     8.703973e-28
    ## 62   deepocean      Arctic   Solid     8.703973e-28
    ## 63   deepocean Continental   Large     2.940037e-05
    ## 64   deepocean    Regional   Large     2.940037e-05
    ## 65   deepocean      Arctic   Large     2.940037e-05
    ## 66   deepocean    Moderate   Large     2.940037e-05
    ## 67   deepocean    Moderate   Small     4.903325e-08
    ## 68   deepocean    Moderate   Solid     8.703973e-28
    ## 71   deepocean    Regional   Solid     8.703973e-28
    ## 74   deepocean    Regional   Small     4.903325e-08
    ## 96        lake      Tropic   Large     2.940037e-05
    ## 97        lake    Regional   Large     2.940037e-05
    ## 98        lake Continental   Large     2.940037e-05
    ## 99        lake    Regional   Small     4.903325e-08
    ## 100       lake      Arctic   Large     2.940037e-05
    ## 101       lake      Arctic   Small     4.903325e-08
    ## 102       lake      Tropic   Small     4.903325e-08
    ## 103       lake      Tropic   Solid     8.703973e-28
    ## 105       lake    Regional   Solid     8.703973e-28
    ## 108       lake Continental   Small     4.903325e-08
    ## 110       lake    Moderate   Large     2.940037e-05
    ## 111       lake    Moderate   Small     4.903325e-08
    ## 112       lake    Moderate   Solid     8.703973e-28
    ## 113       lake      Arctic   Solid     8.703973e-28
    ## 115       lake Continental   Solid     8.703973e-28
    ## 196      river      Tropic   Large     2.940037e-05
    ## 197      river Continental   Large     2.940037e-05
    ## 198      river    Regional   Large     2.940037e-05
    ## 199      river    Moderate   Large     2.940037e-05
    ## 200      river      Arctic   Large     2.940037e-05
    ## 201      river      Arctic   Small     4.903325e-08
    ## 202      river      Arctic   Solid     8.703973e-28
    ## 208      river Continental   Small     4.903325e-08
    ## 209      river Continental   Solid     8.703973e-28
    ## 210      river    Regional   Small     4.903325e-08
    ## 211      river    Moderate   Small     4.903325e-08
    ## 212      river    Moderate   Solid     8.703973e-28
    ## 213      river      Tropic   Solid     8.703973e-28
    ## 214      river    Regional   Solid     8.703973e-28
    ## 215      river      Tropic   Small     4.903325e-08
    ## 216        sea      Arctic   Solid     8.703973e-28
    ## 217        sea Continental   Small     4.903325e-08
    ## 220        sea    Moderate   Solid     8.703973e-28
    ## 221        sea Continental   Solid     8.703973e-28
    ## 222        sea      Arctic   Small     4.903325e-08
    ## 223        sea    Moderate   Small     4.903325e-08
    ## 224        sea Continental   Large     2.940037e-05
    ## 226        sea    Regional   Small     4.903325e-08
    ## 227        sea    Regional   Solid     8.703973e-28
    ## 229        sea    Regional   Large     2.940037e-05
    ## 230        sea      Arctic   Large     2.940037e-05
    ## 231        sea    Moderate   Large     2.940037e-05
    ## 232        sea      Tropic   Large     2.940037e-05
    ## 233        sea      Tropic   Small     4.903325e-08
    ## 234        sea      Tropic   Solid     8.703973e-28

``` r
# why are no values returned?

World$fetchData("RhoS")
```

    ## [1] 5000

``` r
World$fetchData("RadS")
```

    ## [1] 1e-17

``` r
World$fetchData("RhoNuc")
```

    ## [1] 1300

``` r
World$fetchData("RadNuc")
```

    ## [1] 1e-08

``` r
World$fetchData("NumConcNuc")
```

    ##         Scale NumConcNuc
    ## 1      Arctic    3.2e+09
    ## 2 Continental    3.2e+09
    ## 3    Moderate    3.2e+09
    ## 4    Regional    3.2e+09
    ## 5      Tropic    3.2e+09

``` r
World$fetchData("NumConcAcc")
```

    ##         Scale NumConcAcc
    ## 1      Arctic    2.9e+09
    ## 2 Continental    2.9e+09
    ## 3    Moderate    2.9e+09
    ## 4    Regional    2.9e+09
    ## 5      Tropic    2.9e+09

``` r
World$fetchData("Df")
```

    ## [1] 0.3333333

``` r
NodeAsText <- paste(World$nodelist$Params, "->" ,World$nodelist$Calc)
AllNodesAsText <- do.call(paste, c(as.list(NodeAsText), list(sep = ";")))
dag <- dagitty::dagitty(paste("dag{", AllNodesAsText, "}"))
plot(dagitty::graphLayout(dag))
```

![](7.3-OtherIntermedia_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->

``` r
World$FromDataAndTo("k_Sedimentation")
```

    ##             process fromSubCompart       toSubCompart   fromScale     toScale
    ## 51  k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 52  k_Sedimentation           lake       lakesediment      Arctic      Arctic
    ## 53  k_Sedimentation          river freshwatersediment      Arctic      Arctic
    ## 54  k_Sedimentation            sea          deepocean      Arctic      Arctic
    ## 55  k_Sedimentation            sea     marinesediment      Arctic      Arctic
    ## 56  k_Sedimentation      deepocean     marinesediment Continental Continental
    ## 57  k_Sedimentation           lake       lakesediment Continental Continental
    ## 58  k_Sedimentation          river freshwatersediment Continental Continental
    ## 59  k_Sedimentation            sea          deepocean Continental Continental
    ## 60  k_Sedimentation            sea     marinesediment Continental Continental
    ## 61  k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 62  k_Sedimentation           lake       lakesediment    Moderate    Moderate
    ## 63  k_Sedimentation          river freshwatersediment    Moderate    Moderate
    ## 64  k_Sedimentation            sea          deepocean    Moderate    Moderate
    ## 65  k_Sedimentation            sea     marinesediment    Moderate    Moderate
    ## 66  k_Sedimentation      deepocean     marinesediment    Regional    Regional
    ## 67  k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 68  k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 69  k_Sedimentation            sea          deepocean    Regional    Regional
    ## 70  k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 71  k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 72  k_Sedimentation           lake       lakesediment      Tropic      Tropic
    ## 73  k_Sedimentation          river freshwatersediment      Tropic      Tropic
    ## 74  k_Sedimentation            sea          deepocean      Tropic      Tropic
    ## 75  k_Sedimentation            sea     marinesediment      Tropic      Tropic
    ## 76  k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 77  k_Sedimentation           lake       lakesediment      Arctic      Arctic
    ## 78  k_Sedimentation          river freshwatersediment      Arctic      Arctic
    ## 79  k_Sedimentation            sea          deepocean      Arctic      Arctic
    ## 80  k_Sedimentation            sea     marinesediment      Arctic      Arctic
    ## 81  k_Sedimentation      deepocean     marinesediment Continental Continental
    ## 82  k_Sedimentation           lake       lakesediment Continental Continental
    ## 83  k_Sedimentation          river freshwatersediment Continental Continental
    ## 84  k_Sedimentation            sea          deepocean Continental Continental
    ## 85  k_Sedimentation            sea     marinesediment Continental Continental
    ## 86  k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 87  k_Sedimentation           lake       lakesediment    Moderate    Moderate
    ## 88  k_Sedimentation          river freshwatersediment    Moderate    Moderate
    ## 89  k_Sedimentation            sea          deepocean    Moderate    Moderate
    ## 90  k_Sedimentation            sea     marinesediment    Moderate    Moderate
    ## 91  k_Sedimentation      deepocean     marinesediment    Regional    Regional
    ## 92  k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 93  k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 94  k_Sedimentation            sea          deepocean    Regional    Regional
    ## 95  k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 96  k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 97  k_Sedimentation           lake       lakesediment      Tropic      Tropic
    ## 98  k_Sedimentation          river freshwatersediment      Tropic      Tropic
    ## 99  k_Sedimentation            sea          deepocean      Tropic      Tropic
    ## 100 k_Sedimentation            sea     marinesediment      Tropic      Tropic
    ## 101 k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 102 k_Sedimentation           lake       lakesediment      Arctic      Arctic
    ## 103 k_Sedimentation          river freshwatersediment      Arctic      Arctic
    ## 104 k_Sedimentation            sea          deepocean      Arctic      Arctic
    ## 105 k_Sedimentation            sea     marinesediment      Arctic      Arctic
    ## 106 k_Sedimentation      deepocean     marinesediment Continental Continental
    ## 107 k_Sedimentation           lake       lakesediment Continental Continental
    ## 108 k_Sedimentation          river freshwatersediment Continental Continental
    ## 109 k_Sedimentation            sea          deepocean Continental Continental
    ## 110 k_Sedimentation            sea     marinesediment Continental Continental
    ## 111 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 112 k_Sedimentation           lake       lakesediment    Moderate    Moderate
    ## 113 k_Sedimentation          river freshwatersediment    Moderate    Moderate
    ## 114 k_Sedimentation            sea          deepocean    Moderate    Moderate
    ## 115 k_Sedimentation            sea     marinesediment    Moderate    Moderate
    ## 116 k_Sedimentation      deepocean     marinesediment    Regional    Regional
    ## 117 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 118 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 119 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 120 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 121 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 122 k_Sedimentation           lake       lakesediment      Tropic      Tropic
    ## 123 k_Sedimentation          river freshwatersediment      Tropic      Tropic
    ## 124 k_Sedimentation            sea          deepocean      Tropic      Tropic
    ## 125 k_Sedimentation            sea     marinesediment      Tropic      Tropic
    ## 126 k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 127 k_Sedimentation           lake       lakesediment      Arctic      Arctic
    ## 128 k_Sedimentation          river freshwatersediment      Arctic      Arctic
    ## 129 k_Sedimentation            sea          deepocean      Arctic      Arctic
    ## 130 k_Sedimentation            sea     marinesediment      Arctic      Arctic
    ## 131 k_Sedimentation      deepocean     marinesediment Continental Continental
    ## 132 k_Sedimentation           lake       lakesediment Continental Continental
    ## 133 k_Sedimentation          river freshwatersediment Continental Continental
    ## 134 k_Sedimentation            sea          deepocean Continental Continental
    ## 135 k_Sedimentation            sea     marinesediment Continental Continental
    ## 136 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 137 k_Sedimentation           lake       lakesediment    Moderate    Moderate
    ## 138 k_Sedimentation          river freshwatersediment    Moderate    Moderate
    ## 139 k_Sedimentation            sea          deepocean    Moderate    Moderate
    ## 140 k_Sedimentation            sea     marinesediment    Moderate    Moderate
    ## 141 k_Sedimentation      deepocean     marinesediment    Regional    Regional
    ## 142 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 143 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 144 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 145 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 146 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 147 k_Sedimentation           lake       lakesediment      Tropic      Tropic
    ## 148 k_Sedimentation          river freshwatersediment      Tropic      Tropic
    ## 149 k_Sedimentation            sea          deepocean      Tropic      Tropic
    ## 150 k_Sedimentation            sea     marinesediment      Tropic      Tropic
    ##     fromSpecies toSpecies
    ## 51        Large     Large
    ## 52        Large     Large
    ## 53        Large     Large
    ## 54        Large     Large
    ## 55        Large     Large
    ## 56        Large     Large
    ## 57        Large     Large
    ## 58        Large     Large
    ## 59        Large     Large
    ## 60        Large     Large
    ## 61        Large     Large
    ## 62        Large     Large
    ## 63        Large     Large
    ## 64        Large     Large
    ## 65        Large     Large
    ## 66        Large     Large
    ## 67        Large     Large
    ## 68        Large     Large
    ## 69        Large     Large
    ## 70        Large     Large
    ## 71        Large     Large
    ## 72        Large     Large
    ## 73        Large     Large
    ## 74        Large     Large
    ## 75        Large     Large
    ## 76        Small     Small
    ## 77        Small     Small
    ## 78        Small     Small
    ## 79        Small     Small
    ## 80        Small     Small
    ## 81        Small     Small
    ## 82        Small     Small
    ## 83        Small     Small
    ## 84        Small     Small
    ## 85        Small     Small
    ## 86        Small     Small
    ## 87        Small     Small
    ## 88        Small     Small
    ## 89        Small     Small
    ## 90        Small     Small
    ## 91        Small     Small
    ## 92        Small     Small
    ## 93        Small     Small
    ## 94        Small     Small
    ## 95        Small     Small
    ## 96        Small     Small
    ## 97        Small     Small
    ## 98        Small     Small
    ## 99        Small     Small
    ## 100       Small     Small
    ## 101       Solid     Solid
    ## 102       Solid     Solid
    ## 103       Solid     Solid
    ## 104       Solid     Solid
    ## 105       Solid     Solid
    ## 106       Solid     Solid
    ## 107       Solid     Solid
    ## 108       Solid     Solid
    ## 109       Solid     Solid
    ## 110       Solid     Solid
    ## 111       Solid     Solid
    ## 112       Solid     Solid
    ## 113       Solid     Solid
    ## 114       Solid     Solid
    ## 115       Solid     Solid
    ## 116       Solid     Solid
    ## 117       Solid     Solid
    ## 118       Solid     Solid
    ## 119       Solid     Solid
    ## 120       Solid     Solid
    ## 121       Solid     Solid
    ## 122       Solid     Solid
    ## 123       Solid     Solid
    ## 124       Solid     Solid
    ## 125       Solid     Solid
    ## 126     Unbound   Unbound
    ## 127     Unbound   Unbound
    ## 128     Unbound   Unbound
    ## 129     Unbound   Unbound
    ## 130     Unbound   Unbound
    ## 131     Unbound   Unbound
    ## 132     Unbound   Unbound
    ## 133     Unbound   Unbound
    ## 134     Unbound   Unbound
    ## 135     Unbound   Unbound
    ## 136     Unbound   Unbound
    ## 137     Unbound   Unbound
    ## 138     Unbound   Unbound
    ## 139     Unbound   Unbound
    ## 140     Unbound   Unbound
    ## 141     Unbound   Unbound
    ## 142     Unbound   Unbound
    ## 143     Unbound   Unbound
    ## 144     Unbound   Unbound
    ## 145     Unbound   Unbound
    ## 146     Unbound   Unbound
    ## 147     Unbound   Unbound
    ## 148     Unbound   Unbound
    ## 149     Unbound   Unbound
    ## 150     Unbound   Unbound

``` r
test1 <- World$NewProcess("k_Sedimentation")
test1$execute()
```

    ##            process fromSubCompart       toSubCompart   fromScale     toScale
    ## 1  k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 7  k_Sedimentation           lake       lakesediment Continental Continental
    ## 8  k_Sedimentation          river freshwatersediment Continental Continental
    ## 9  k_Sedimentation            sea          deepocean Continental Continental
    ## 10 k_Sedimentation            sea     marinesediment Continental Continental
    ## 11 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 17 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 18 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 19 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 20 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 21 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 26 k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 32 k_Sedimentation           lake       lakesediment Continental Continental
    ## 33 k_Sedimentation          river freshwatersediment Continental Continental
    ## 34 k_Sedimentation            sea          deepocean Continental Continental
    ## 35 k_Sedimentation            sea     marinesediment Continental Continental
    ## 36 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 42 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 43 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 44 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 45 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 46 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 51 k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 57 k_Sedimentation           lake       lakesediment Continental Continental
    ## 58 k_Sedimentation          river freshwatersediment Continental Continental
    ## 59 k_Sedimentation            sea          deepocean Continental Continental
    ## 60 k_Sedimentation            sea     marinesediment Continental Continental
    ## 61 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 67 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 68 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 69 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 70 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 71 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ## 76 k_Sedimentation      deepocean     marinesediment      Arctic      Arctic
    ## 82 k_Sedimentation           lake       lakesediment Continental Continental
    ## 83 k_Sedimentation          river freshwatersediment Continental Continental
    ## 84 k_Sedimentation            sea          deepocean Continental Continental
    ## 85 k_Sedimentation            sea     marinesediment Continental Continental
    ## 86 k_Sedimentation      deepocean     marinesediment    Moderate    Moderate
    ## 92 k_Sedimentation           lake       lakesediment    Regional    Regional
    ## 93 k_Sedimentation          river freshwatersediment    Regional    Regional
    ## 94 k_Sedimentation            sea          deepocean    Regional    Regional
    ## 95 k_Sedimentation            sea     marinesediment    Regional    Regional
    ## 96 k_Sedimentation      deepocean     marinesediment      Tropic      Tropic
    ##    fromSpecies toSpecies            k
    ## 1        Large     Large 9.800125e-09
    ## 7        Large     Large 2.940037e-07
    ## 8        Large     Large 9.800125e-06
    ## 9        Large     Large 1.470019e-07
    ## 10       Large     Large 1.470019e-07
    ## 11       Large     Large 9.800125e-09
    ## 17       Large     Large 2.940037e-07
    ## 18       Large     Large 9.800125e-06
    ## 19       Large     Large 2.940037e-06
    ## 20       Large     Large 2.940037e-06
    ## 21       Large     Large 9.800125e-09
    ## 26       Small     Small 1.634442e-11
    ## 32       Small     Small 4.903325e-10
    ## 33       Small     Small 1.634442e-08
    ## 34       Small     Small 2.451662e-10
    ## 35       Small     Small 2.451662e-10
    ## 36       Small     Small 1.634442e-11
    ## 42       Small     Small 4.903325e-10
    ## 43       Small     Small 1.634442e-08
    ## 44       Small     Small 4.903325e-09
    ## 45       Small     Small 4.903325e-09
    ## 46       Small     Small 1.634442e-11
    ## 51       Solid     Solid 2.901324e-31
    ## 57       Solid     Solid 8.703973e-30
    ## 58       Solid     Solid 2.901324e-28
    ## 59       Solid     Solid 4.351986e-30
    ## 60       Solid     Solid 4.351986e-30
    ## 61       Solid     Solid 2.901324e-31
    ## 67       Solid     Solid 8.703973e-30
    ## 68       Solid     Solid 2.901324e-28
    ## 69       Solid     Solid 8.703973e-29
    ## 70       Solid     Solid 8.703973e-29
    ## 71       Solid     Solid 2.901324e-31
    ## 76     Unbound   Unbound 5.923229e-12
    ## 82     Unbound   Unbound 7.597354e-11
    ## 83     Unbound   Unbound 1.344990e-08
    ## 84     Unbound   Unbound 8.884844e-11
    ## 85     Unbound   Unbound 8.884844e-11
    ## 86     Unbound   Unbound 5.923229e-12
    ## 92     Unbound   Unbound 7.597354e-11
    ## 93     Unbound   Unbound 1.344990e-08
    ## 94     Unbound   Unbound 1.776969e-09
    ## 95     Unbound   Unbound 1.776969e-09
    ## 96     Unbound   Unbound 5.923229e-12

``` r
# test1$execute(debugAt = list(SubCompartName = "sea", ScaleName = "Moderate"))
```

## Resuspension

The net sedimentation of SPM particles \[m/s\] is the sedimentation
minus the resuspension. The net sedimentation is input to calculate the
resuspension. The net sedimentation cannot exceed the sedimentation,
this case is caught by the max(,0) function. The other species have
equal rate constants.

``` r
World$FromDataAndTo("k_Resuspension")
```

    ##            process     fromSubCompart toSubCompart   fromScale     toScale
    ## 41  k_Resuspension freshwatersediment        river      Arctic      Arctic
    ## 42  k_Resuspension       lakesediment         lake      Arctic      Arctic
    ## 43  k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 44  k_Resuspension     marinesediment          sea      Arctic      Arctic
    ## 45  k_Resuspension freshwatersediment        river Continental Continental
    ## 46  k_Resuspension       lakesediment         lake Continental Continental
    ## 47  k_Resuspension     marinesediment    deepocean Continental Continental
    ## 48  k_Resuspension     marinesediment          sea Continental Continental
    ## 49  k_Resuspension freshwatersediment        river    Moderate    Moderate
    ## 50  k_Resuspension       lakesediment         lake    Moderate    Moderate
    ## 51  k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 52  k_Resuspension     marinesediment          sea    Moderate    Moderate
    ## 53  k_Resuspension freshwatersediment        river    Regional    Regional
    ## 54  k_Resuspension       lakesediment         lake    Regional    Regional
    ## 55  k_Resuspension     marinesediment    deepocean    Regional    Regional
    ## 56  k_Resuspension     marinesediment          sea    Regional    Regional
    ## 57  k_Resuspension freshwatersediment        river      Tropic      Tropic
    ## 58  k_Resuspension       lakesediment         lake      Tropic      Tropic
    ## 59  k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 60  k_Resuspension     marinesediment          sea      Tropic      Tropic
    ## 61  k_Resuspension freshwatersediment        river      Arctic      Arctic
    ## 62  k_Resuspension       lakesediment         lake      Arctic      Arctic
    ## 63  k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 64  k_Resuspension     marinesediment          sea      Arctic      Arctic
    ## 65  k_Resuspension freshwatersediment        river Continental Continental
    ## 66  k_Resuspension       lakesediment         lake Continental Continental
    ## 67  k_Resuspension     marinesediment    deepocean Continental Continental
    ## 68  k_Resuspension     marinesediment          sea Continental Continental
    ## 69  k_Resuspension freshwatersediment        river    Moderate    Moderate
    ## 70  k_Resuspension       lakesediment         lake    Moderate    Moderate
    ## 71  k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 72  k_Resuspension     marinesediment          sea    Moderate    Moderate
    ## 73  k_Resuspension freshwatersediment        river    Regional    Regional
    ## 74  k_Resuspension       lakesediment         lake    Regional    Regional
    ## 75  k_Resuspension     marinesediment    deepocean    Regional    Regional
    ## 76  k_Resuspension     marinesediment          sea    Regional    Regional
    ## 77  k_Resuspension freshwatersediment        river      Tropic      Tropic
    ## 78  k_Resuspension       lakesediment         lake      Tropic      Tropic
    ## 79  k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 80  k_Resuspension     marinesediment          sea      Tropic      Tropic
    ## 81  k_Resuspension freshwatersediment        river      Arctic      Arctic
    ## 82  k_Resuspension       lakesediment         lake      Arctic      Arctic
    ## 83  k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 84  k_Resuspension     marinesediment          sea      Arctic      Arctic
    ## 85  k_Resuspension freshwatersediment        river Continental Continental
    ## 86  k_Resuspension       lakesediment         lake Continental Continental
    ## 87  k_Resuspension     marinesediment    deepocean Continental Continental
    ## 88  k_Resuspension     marinesediment          sea Continental Continental
    ## 89  k_Resuspension freshwatersediment        river    Moderate    Moderate
    ## 90  k_Resuspension       lakesediment         lake    Moderate    Moderate
    ## 91  k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 92  k_Resuspension     marinesediment          sea    Moderate    Moderate
    ## 93  k_Resuspension freshwatersediment        river    Regional    Regional
    ## 94  k_Resuspension       lakesediment         lake    Regional    Regional
    ## 95  k_Resuspension     marinesediment    deepocean    Regional    Regional
    ## 96  k_Resuspension     marinesediment          sea    Regional    Regional
    ## 97  k_Resuspension freshwatersediment        river      Tropic      Tropic
    ## 98  k_Resuspension       lakesediment         lake      Tropic      Tropic
    ## 99  k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 100 k_Resuspension     marinesediment          sea      Tropic      Tropic
    ## 101 k_Resuspension freshwatersediment        river      Arctic      Arctic
    ## 102 k_Resuspension       lakesediment         lake      Arctic      Arctic
    ## 103 k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 104 k_Resuspension     marinesediment          sea      Arctic      Arctic
    ## 105 k_Resuspension freshwatersediment        river Continental Continental
    ## 106 k_Resuspension       lakesediment         lake Continental Continental
    ## 107 k_Resuspension     marinesediment    deepocean Continental Continental
    ## 108 k_Resuspension     marinesediment          sea Continental Continental
    ## 109 k_Resuspension freshwatersediment        river    Moderate    Moderate
    ## 110 k_Resuspension       lakesediment         lake    Moderate    Moderate
    ## 111 k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 112 k_Resuspension     marinesediment          sea    Moderate    Moderate
    ## 113 k_Resuspension freshwatersediment        river    Regional    Regional
    ## 114 k_Resuspension       lakesediment         lake    Regional    Regional
    ## 115 k_Resuspension     marinesediment    deepocean    Regional    Regional
    ## 116 k_Resuspension     marinesediment          sea    Regional    Regional
    ## 117 k_Resuspension freshwatersediment        river      Tropic      Tropic
    ## 118 k_Resuspension       lakesediment         lake      Tropic      Tropic
    ## 119 k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 120 k_Resuspension     marinesediment          sea      Tropic      Tropic
    ##     fromSpecies toSpecies
    ## 41        Large     Large
    ## 42        Large     Large
    ## 43        Large     Large
    ## 44        Large     Large
    ## 45        Large     Large
    ## 46        Large     Large
    ## 47        Large     Large
    ## 48        Large     Large
    ## 49        Large     Large
    ## 50        Large     Large
    ## 51        Large     Large
    ## 52        Large     Large
    ## 53        Large     Large
    ## 54        Large     Large
    ## 55        Large     Large
    ## 56        Large     Large
    ## 57        Large     Large
    ## 58        Large     Large
    ## 59        Large     Large
    ## 60        Large     Large
    ## 61        Small     Small
    ## 62        Small     Small
    ## 63        Small     Small
    ## 64        Small     Small
    ## 65        Small     Small
    ## 66        Small     Small
    ## 67        Small     Small
    ## 68        Small     Small
    ## 69        Small     Small
    ## 70        Small     Small
    ## 71        Small     Small
    ## 72        Small     Small
    ## 73        Small     Small
    ## 74        Small     Small
    ## 75        Small     Small
    ## 76        Small     Small
    ## 77        Small     Small
    ## 78        Small     Small
    ## 79        Small     Small
    ## 80        Small     Small
    ## 81        Solid     Solid
    ## 82        Solid     Solid
    ## 83        Solid     Solid
    ## 84        Solid     Solid
    ## 85        Solid     Solid
    ## 86        Solid     Solid
    ## 87        Solid     Solid
    ## 88        Solid     Solid
    ## 89        Solid     Solid
    ## 90        Solid     Solid
    ## 91        Solid     Solid
    ## 92        Solid     Solid
    ## 93        Solid     Solid
    ## 94        Solid     Solid
    ## 95        Solid     Solid
    ## 96        Solid     Solid
    ## 97        Solid     Solid
    ## 98        Solid     Solid
    ## 99        Solid     Solid
    ## 100       Solid     Solid
    ## 101     Unbound   Unbound
    ## 102     Unbound   Unbound
    ## 103     Unbound   Unbound
    ## 104     Unbound   Unbound
    ## 105     Unbound   Unbound
    ## 106     Unbound   Unbound
    ## 107     Unbound   Unbound
    ## 108     Unbound   Unbound
    ## 109     Unbound   Unbound
    ## 110     Unbound   Unbound
    ## 111     Unbound   Unbound
    ## 112     Unbound   Unbound
    ## 113     Unbound   Unbound
    ## 114     Unbound   Unbound
    ## 115     Unbound   Unbound
    ## 116     Unbound   Unbound
    ## 117     Unbound   Unbound
    ## 118     Unbound   Unbound
    ## 119     Unbound   Unbound
    ## 120     Unbound   Unbound

``` r
World$fetchData("SUSP")
```

    ##    SubCompart   SUSP
    ## 4   deepocean 0.0050
    ## 6        lake 0.0005
    ## 11      river 0.0150
    ## 12        sea 0.0050

``` r
World$fetchData("NETsedrate")
```

    ##          Scale SubCompart NETsedrate
    ## 3       Arctic  deepocean   6.30e-14
    ## 14 Continental       lake   8.60e-11
    ## 19 Continental      river   8.60e-11
    ## 20 Continental        sea   0.00e+00
    ## 23    Moderate  deepocean   8.95e-14
    ## 34    Regional       lake   8.70e-11
    ## 39    Regional      river   8.70e-11
    ## 40    Regional        sea   2.70e-11
    ## 43      Tropic  deepocean   6.30e-14

``` r
test1 <- World$NewProcess("k_Resuspension")
test1$execute() #all are 0, this does not correspond to default in SB, check needed.
```

    ##           process     fromSubCompart toSubCompart   fromScale     toScale
    ## 3  k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 5  k_Resuspension freshwatersediment        river Continental Continental
    ## 6  k_Resuspension       lakesediment         lake Continental Continental
    ## 8  k_Resuspension     marinesediment          sea Continental Continental
    ## 11 k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 13 k_Resuspension freshwatersediment        river    Regional    Regional
    ## 14 k_Resuspension       lakesediment         lake    Regional    Regional
    ## 16 k_Resuspension     marinesediment          sea    Regional    Regional
    ## 19 k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 23 k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 25 k_Resuspension freshwatersediment        river Continental Continental
    ## 26 k_Resuspension       lakesediment         lake Continental Continental
    ## 28 k_Resuspension     marinesediment          sea Continental Continental
    ## 31 k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 33 k_Resuspension freshwatersediment        river    Regional    Regional
    ## 34 k_Resuspension       lakesediment         lake    Regional    Regional
    ## 36 k_Resuspension     marinesediment          sea    Regional    Regional
    ## 39 k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 43 k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 45 k_Resuspension freshwatersediment        river Continental Continental
    ## 46 k_Resuspension       lakesediment         lake Continental Continental
    ## 48 k_Resuspension     marinesediment          sea Continental Continental
    ## 51 k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 53 k_Resuspension freshwatersediment        river    Regional    Regional
    ## 54 k_Resuspension       lakesediment         lake    Regional    Regional
    ## 56 k_Resuspension     marinesediment          sea    Regional    Regional
    ## 59 k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ## 63 k_Resuspension     marinesediment    deepocean      Arctic      Arctic
    ## 65 k_Resuspension freshwatersediment        river Continental Continental
    ## 66 k_Resuspension       lakesediment         lake Continental Continental
    ## 68 k_Resuspension     marinesediment          sea Continental Continental
    ## 71 k_Resuspension     marinesediment    deepocean    Moderate    Moderate
    ## 73 k_Resuspension freshwatersediment        river    Regional    Regional
    ## 74 k_Resuspension       lakesediment         lake    Regional    Regional
    ## 76 k_Resuspension     marinesediment          sea    Regional    Regional
    ## 79 k_Resuspension     marinesediment    deepocean      Tropic      Tropic
    ##    fromSpecies toSpecies k
    ## 3        Large     Large 0
    ## 5        Large     Large 0
    ## 6        Large     Large 0
    ## 8        Large     Large 0
    ## 11       Large     Large 0
    ## 13       Large     Large 0
    ## 14       Large     Large 0
    ## 16       Large     Large 0
    ## 19       Large     Large 0
    ## 23       Small     Small 0
    ## 25       Small     Small 0
    ## 26       Small     Small 0
    ## 28       Small     Small 0
    ## 31       Small     Small 0
    ## 33       Small     Small 0
    ## 34       Small     Small 0
    ## 36       Small     Small 0
    ## 39       Small     Small 0
    ## 43       Solid     Solid 0
    ## 45       Solid     Solid 0
    ## 46       Solid     Solid 0
    ## 48       Solid     Solid 0
    ## 51       Solid     Solid 0
    ## 53       Solid     Solid 0
    ## 54       Solid     Solid 0
    ## 56       Solid     Solid 0
    ## 59       Solid     Solid 0
    ## 63     Unbound   Unbound 0
    ## 65     Unbound   Unbound 0
    ## 66     Unbound   Unbound 0
    ## 68     Unbound   Unbound 0
    ## 71     Unbound   Unbound 0
    ## 73     Unbound   Unbound 0
    ## 74     Unbound   Unbound 0
    ## 76     Unbound   Unbound 0
    ## 79     Unbound   Unbound 0

``` r
# test1$execute(debugAt = list(SpeciesName = "Attached"))
```
